% !TEX root = _main.tex
% ========================================
% 卒業論文　本文
% ========================================
\section{はじめに}

2025年11月28日に和田山の特別支援学校で開催されたUD交流会(「DXでつながるワトクの学び」)に参加した。  

この交流会に参加したきっかけは、今回共同で作成した方の興味のある分野で交流会のお話を知り、
私自身も映像系・エンタメ系には興味があり、どのようなものを制作すれば多くの人が楽しんでくれるのか考える機会となり
今後の私自身の研究につながると考え参加した。  

今回壁と床を使った作品を制作し、児童生徒などに体験  

今回は作品の制作についてと実際に参加した交流会について報告する。

%2
\section{和田山特別支援学校UD交流会について}
UD交流会はユニバーサルデザインのゲーム、デジタルファブリケーション、そして生成AIと多様なツールを活用して、児童生徒が地域と交流を深める可能性を探るものであり(参考文献)、
大きく３つの目的がある。  

1. ユニバーサルデザインのゲーム交流会を通じて、児童生徒が地域の方と協力しながら活動する中で、協調性やコミュニケーション能力を育む  

2. デジタルファブリケーション体験会を通じて、特別支援学校におけるデジタル技術を活用したモノづくりの可能性を広げ、創造的な学びのきっかけを提供する  

3. 生成AI活用研修会を通通じて、教育現場でのAI活用の最新事例や実践的な活用方法を学び、特別支援教育における新たな実践アイデアの創出につなげる  

である。  

参加者は特別支援学校の小学部から高等部までの児童生徒65名、保護者
その他の県立の特別支援学校、朝来市・養父市の福祉及び行政関係者
近隣の福祉介護施設の方、放課後等デイサービスの事業者の方である。
(↑scrapboxにあったお知らせの紙)


%3
\section{制作に向けて}


%3.2
\subsection{特別支援学校見学}
実際見学したことと見学したことで作品に反映されたことなど書きたい

%3.4
\subsection{初期構想}

次に、初期構想について記述する。ゲーム性があるものとゲーム性がないものの大きく2つに分けて考えた。  
ゲーム性があるものとして2つ案を出した。  

1つ目は、体験する人はチャンバラ棒を持ち、それを振ると壁に映されたものが同じように動くようにするものを制作し、
対戦形式の遊びやミッションを設け、対象物を攻撃してもらうというものである。  

2つ目は、画面上に対象物が現れ、触れることで消え、時間内にどれだけ多く消せるかを目指すゲームの制作  

ゲーム性なしの方向性では、床と壁それぞれ使うものの案を出した。  
壁は、画面に巨大な楽器を映し出し、実際に押さえるところは光で教え、その楽器の部分を触ることでその楽器の音が鳴り、
楽器を疑似体験できるようなものを考えた  

床は、水面などの実際にその場を歩いているような体験ができるものを考えた。  

ゲーム性の有り無しを考えた理由としては、ゲーム性を持つとルール説明などが必要になることに加え、
ルール理解も少し困難な部分があるのではないかと感じ、触るだけという直感的なものだけで楽しめるようにしたいと考えた。
(全貌が分からなくても？動くだけで演出が変わったりするのは体験としても手軽でいいのではないか？)  

共同制作者などと話し合いをし、最終的に
壁に触れることで楽器の切り替えと楽器の音を鳴らす体験ができるものと、
床にもプロジェクターで投影させ、実際にその場を歩いているような体験ができるものに決定した。

%4
\section{制作}

先ほど挙げた最終案の制作について説明する。  

作品の内容は  

・mediapipeを使用して座標をとる  

・壁→ボタンを触れると音が鳴り映し出される楽器の変更→楽器を触るとその楽器の音が鳴る→エフェクトが出現する  

・床→歩くとその場に対応したエフェクト→歩くと動物が追従してくるもの→壁側の音に反応してエフェクトを出現

%4.1
\subsection{展示構造}
・プロジェクターを上から床に向けて投影  

・プロジェクターの左側にカメラを設置  

(この設置図制作してもいいかも？)

%4.2
\subsection{MediaPipeとは}

MediaPipeとは画像や動画からモーションキャプチャーのように骨格検出を行うことができるGoogleが開発したオープンソースのライブラリであり、
手先の位置から各関節位置を検出することが可能である。(参考文献)  

主な機能としては以下のものなどが挙げられる  

・顔認識  

・手の検出  

・姿勢推定  

・物体検出(参考文献)

%4.2.1
\subsubsection{MediaPipeの役割}
共同作成者に制作してもらい私はこのコードは受け取り制作を行った。  

今回のMediaPipeのコードはカメラ映像から取得した人の足の位置を、実際の床上の座標に変換し、その位置と移動方向をUnityにリアルタイムに送信するものである。
具体的なコードの動きとしては以下のようになっていた。  

プログラムを開始するとカメラが起動し、リアルタイムの映像を取得する。
その取得された映像を見ながら床の4隅を左上、右上、右下、左下の順でクリックをするとカメラ画像上における床の位置情報として記録される。
床の座標の定義も行っている。これは、床全体を0～1の正規化された正方形空間として扱っており左上を(０,０)、右下を(１,１)としている。

%4.3
\subsection{MediaPipe(Python)→Unity}
Pythonで制作したMediaPipeをUnityで受け取るためのコードを制作。  

Python側からUDP通信で送られてくるJSONデータを受信し、左右の移動方向、位置情報をUnity内で扱える形に変換したものである
(もっと詳しく)


%4.4
\subsection{壁}
Unityで制作を行った。  

プロジェクターで投影された壁は左半分を楽器が出力される部分と楽器選択のボタンを配置している(画像貼る？)
ボタンの部分に触れるとボタンを押したことが分かるように「カチッ」という音を鳴らした。
ボタンを押すことで画面左側の楽器の部分がボタンに対応する楽器に変更される
その楽器を触るとその楽器の音が鳴るというものを制作した。  

ここからは共同制作者に引継ぎを行った。




%4.5
\subsection{床}
初期案にあった通り水辺のものを制作した。  

最初はtouchdesignerで制作を行った。しかし、歩いたときに出現させる予定であった波紋の制作が困難であったため、Unityの制作に変更をした。
(touchdesignerで制作したものの画像？)  

制作を進めると、出展される作品の中に水面を使い歩くという酷似した内容の展示物があったため内容はそのままに水辺から星空への変更を行った。
星空に変更した理由としては、やはり映像で楽しんでもらうので非現実的なことができた方が面白いのではないかと考えたからである。
もう一つの理由として、壁側の方でクリスマスの仕様に変更されていたためクリスマスと雰囲気を合わせることも狙いであった。
(画像)

%4.5.1
\subsubsection{踏んで星}
床を歩くと星が足元に散らばるものの制作について記述する。  

まず、Python(MediaPipe)から送られてきた左足・右足それぞれの位置情報を受け取る→瞬間瞬間に今どの位置に足があるのかチェックされる
→足の座標をUntiyのワールド座標に変換(ここでもう少し詳しく)
→制作したオブジェクトについているColliderの中に足が入ったかを判定→踏んでいたらエフェクトが出現する

FootEffectSpawnerのコードについても

(画像)

%4.5.2
\subsubsection{動物追従について}
次に、歩くとそのあとを動物ががついてくるものの制作について記述する。
動物の位置・向きとアニメーターを制御するコードを作成した
Python(MediaPipe)から送られてきた足の位置情報の取得
→人との距離感の設定(小さい程近くに止まるようになる)
→動物の移動速度の設定
→アニメーションの制御設定
→最初に一度だけオブジェクトのアニメーターを取得
→左足と右足の平均の位置をとり人の立ち位置(体の中心)を表す
→先ほどと同じようにUntiyのワールド座標に変換
→動物を常に人の方向に向くように設定
→人がUntiyのワールド座標に変換した位置と動物の位置の２つのベクトルの差分を計算することで動物が人の位置へ向かう方向と人との距離を一定に保つこと設定している
→距離のチェックを行い、人との距離が一定距離以下になると座るアニメーション、一定以上になると歩くアニメーション

動物はUnityのストアからとってきた



%4.5.3
\subsubsection{音に反応してエフェクト}
壁側の音に反応して床にエフェクトが発生するというものについて記述する。

閾値の設定と周波数の設定を行う(実際の数値記述(表作ってもいいかも))
→降ってくるエフェクトを制作した→連続でエフェクトが出すぎないように制御
→PCの内蔵のマイクを使用
→FFT(高速フーリエ変換(参考文献))で音を周波数ごとに分解(もう少し詳しく)
→周波数からUnityが扱う配列番号に変換する計算を行う
→440Hzが強いと雪が降る演出、660Hzが強いと設定した画像2種類を同時に振らせる
(画像)

画像はいらすとや

%5
\section{UD交流会に参加して}

・本番と同じ状態でリハーサルができなかったため、準備に少し手間取った。カメラの位置設定思ったよりうまくいかないことが多かった  

・かわいいと言っていただけたり好評であった  

・追いかけてくるトナカイを追従という動きだけでなく撫でたり、踏んでみたりそれぞれ個人での楽しみ方でも楽しんでいただけた
→追従の部分しか考えておらず撫でたり触れ合ったりという部分の制作にまで考えが至らなかった→それぞれの楽しみ方がある→今後の作品作りにもつながるよい機会となった  

(画像)

%5.1
\subsection{コミュニケーション？面}
生徒迷っているときに近くに歩み寄って動き方やどうなっているのかを説明できたのでよかった。
しっかり質問されたことについて回答出来ていたのでよかった。
床の方だけ体験して別のブースに行かれる方を目にしたので床の方の説明が終わった後に
壁側の体験展示に誘導できた部分もあったのでよかった。  

課題点  
・親御さんに質問され、それに返答するところまではよかったが、そこからあまり生徒の方に話に行けなかった
・低学年の子に多かったのが視線が作品に行かないことである
→床の演出変化なので床を見てもらわないと分からないが、前を見たりなど床を見ない人が多く、その際の視線誘導ができなかった(保護者が子供に説明しているのを見ることしかできなかった)


%5.2
\subsection{製作面}
途中で止まることなく理想の動きができていたのでよかった

課題点  

・先ほども記述した視線誘導
→踏むと音が下の方からなるようにするなどもっと言葉での誘導以外にも方法はあったのではないか
・MediaPipeの座標取得
→座標はしっかりとれていたが、肩まで写す必要があるものであったため、カメラの高さが足りず動きが制限され、背の高い人などがあまり動くことができず楽しめなかったのではないか
→投影される画面の大きさにも限界があり
⇒床の演出変化は動くことで楽しさが分かると思うがそれが実現できない場面もあった

追従の形の工夫
座標は常に場所を取得しているため少しでも動くと動いた判定になり座標のSTOPの判定が難しく、しっかり止まってSTOPという場面が少なかったので
トナカイが止まっても少しずつガクガク動いてしまい変な挙動を見せることが多かった。

座標と追従の部分で車いすの方が後ろを向けないので追従しているのかどうかわからないため、あまり楽しめなかったのではないか  

・PCのマイクで音を拾っていたため、閾値の弱さも関係がありそう
→周りの雑音でもエフェクトが発生してしまうことがあった
エフェクトの出現の仕方も音が鳴ることで反応しているか分かるような工夫が必要であったのではないか



%6
\section{まとめ/今後の展望}
UD交流会に参加したことについて記述した。
今回この交流会に参加して楽しんでもらうことの達成感と難しさを感じた
どのように制作すれば多くの人に楽しんでもらえるのか
実際に体験によって変化しているというものをどのように伝え、それを踏まえたうえで楽しんでもらうか
さらに考えられるいい機会となった
