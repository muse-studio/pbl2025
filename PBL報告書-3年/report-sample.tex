% !TEX root = _main3nen.tex
% ========================================
% 卒業論文本文
% ========================================
\section{はじめに}
音楽は，言葉を使わずに気持ちの表現や他者と関わるための手段の一つである．
障がい者支援においても，音や体の動きを通した活動が自分の気持ちを表すきっかけになることがある．

本研究は，音楽と障がい者支援の関係性に関心を持ち，デジタル技術を用いた音楽表現の可能性について考える中で発想を得たものである．
その過程で，兵庫県立和田山特別支援学校において，デジタル技術を活用したイベントが企画されていることを知り，大学を通じてブース設置の依頼を受けた．
そこで，特別支援学校の児童生徒を対象とした音楽インタラクションシステムの作成および実践を行うこととなった．

%2
\section{制作・実践に向けた事前調査}
本研究では，兵庫県立和田山特別支援学校\cite{zotero-item-10409}で開催されるイベントに向けてのシステムの制作や実践を行った．
この実践に向けて2025年10月3日に和田山特別支援学校を訪問し，授業や活動の様子やICT活用の様子を見学した．


%2.1
\subsection{事前学校見学}
和田山特別支援学校には小学部から高等部までの生徒が在籍している．

事前学校見学では，実践に向けて対象となる児童生徒の様子を把握することを目的とし，授業や活動の様子，ICTの活用状況などの見学を行った．


%2.1.1
\subsection{授業や活動の様子}
学校見学では，児童生徒が教室で学んでいる様子や音楽の授業，その他の活動の様子などを見学することができた．

小学部の授業を見ることはできなかったが，休憩時間に教師とボールで遊んだり，クラスのメンバーで整列して廊下を移動したりする様子が見られ，児童生徒が教師や周囲の人と積極的にかかわっている様子が確認できた．

中学部や高等部では，授業の様子を見学することができた．
授業は障がい特性によってクラス分けされていたり，内容や進め方に様々な工夫が行われたりしていた．
音楽の授業では，教師と生徒が声を掛け合いながら，全員で合奏ができるように練習している様子を見ることができ，生徒同士が協力して活動に取り組んでいた．


%2.1.2
\subsection{ICT活用の様子}
学校見学の際，高等部の生徒が遠隔操作ロボット「OriHime\cite{Orihime}」を用いた実習の様子を見ることができた．
生徒たちはロボットを介して他者と関わりながら活動していた．

%3
\section{作成したシステム}
本研究で制作したシステムは，Webカメラで利用者の手の動きを認識し，その情報をもとに音や壁に映した映像が変化するシステムである．

Webカメラで映像を取得し，手や手の動きの認識をMediaPipe\cite{MediaPipeSolutionsGuide}で行い，Pythonでその情報を処理し，Unityに送信する．
Unityでは，音楽再生や映像を制御した．システムの構成としては\figref{fig:system}の通りである．

利用者は，投影した映像の上で手を動かしたり壁を押す動きをしたりすることで，曲の音色の変化や音量の変化，映像の変化を楽しむことができる．

\begin{figure}[tb]
    \includegraphics[width=\linewidth]{system.png}
    \caption{システム構成図}\label{fig:system}
\end{figure}


%3.1
\subsection{作成の目的}
作成の目的としては２つある．

１つ目は，特別支援学校に通う児童生徒が楽しめるシステムを作ることである．
前章でも述べた通り，特別支援学校の児童生徒は障がいの特性や身体能力に個人差が大きい．
できるだけ多くの児童生徒が参加できるように，簡単な操作で分かりやすいシステムを目標とした．

２つ目は，簡単な機材で誰でも構築可能なシステムにすることである．
高価な機器やセンサを用いずにWebカメラとPCがあれば誰でも簡単に再現や応用ができるようなシステムを目指した．


%3.2
\subsection{画面構成}
投影する映像は，生成AIツール「Animon.ai\cite{zotero-item-10406}」で作成した画像と素材集・イラスト素材を組み合わせて制作した．

Animon.aiとは，株式会社アニモンドリームファクトリーが提供しているアニメ制作に特化したAI動画生成プラットフォームである．
本研究では，Animon.aiで提供されている，テキスト入力で画像生成できる機能を使用した．

\figref{fig:basic}に画面構成を示す．

Animon.aiでは，背景，ピアノを弾いているうさぎ，ギターを弾いているきつね，ヴァイオリンを弾いているリス，フルートを吹いている小鳥，トランペットを吹いているハムスター，ドラムをたたいているたぬき，クリスマスツリーを作成した．素
材集からは図の左上に配置した雪だるま，イラスト素材からは音符の画像を使用した．

配置については，背の低い児童生徒も遊びやすいように下の方に動物キャラクターを配置した．
クリスマスツリーを画面の中央に配置し，暗い状態とオーナメントの明かりがついた状態のものを用意した．
音符はそれぞれの動物の周りに用意した．

\begin{figure}[tb]
    \includegraphics[width=\linewidth]{basic.png}
    \caption{画面の基本構成}\label{fig:basic}
\end{figure}


%3.3
\subsection{使用した音源}
本システムでは，クリスマスの時期に実践を行ったため，楽曲として「ジングルベル」\cite{retudokiyatutorideinguRedCatReading}\cite{zotero-item-10411}を使用した．
いくつかのWebサイトや動画を参考にMuseScoreを使って楽譜を作成した．
楽譜は，ピアノ，ギター，弦楽器（ヴァイオリン，ヴィオラ，チェロ），木管楽器（フルート，クラリネット），金管楽器，（トランペット，ホルン），打楽器（声楽のメロディとドラム）の６種類を作成した．
MuseScoreに収録されているそれぞれの楽器の音源をWAVファイルとして保存し，システムで使用した．

%3.4
\subsection{処理}

%3.4.1
\subsubsection{カメラ入力とMediaPipeによる座標取得}
利用者の手の動きを認識するために，本システムではMediaPipeを用いて手の検出を行った．
MediaPipeは，Webカメラから入力された映像をもとに，人の手のランドマーク座標をリアルタイムで推定することができるライブラリである．

本システムでは，「壁を触った（近づけた）」という感覚と「触ったことで音が鳴る」という体験を重視したいと考え，手の位置情報を確実に取得できるように上方向から設置したカメラと横方向から設置したカメラの２台を使用した．
上方向から設置したカメラは映像に対して横方向の手の位置取得を行い，横方向から設置したカメラは壁と手の接近状態の取得，映像に対して縦方向の手の位置取得を行っている．

%3.4.2
\subsubsection{Pythonによる情報処理とUDP通信}
Pythonでは，MediaPipeで得た手の情報を処理し，Unityに送信する．

また，両方のカメラから取得した情報の処理の流れは共通しており，カメラ入力，手の検出，ランドマークの座標の取得，画面に映像とランドマークの位置と数字をデバッグ表示，Unityに情報を送信するという構成になっている．

まず，OpenCVを用いてWebカメラを起動し，MediaPipeにより手の検出を行う．
手が見つからなかった場合は，手が存在しないことを表示し，座標は（0, 0, 0）を返す．
手が見つかれば，手のランドマーク座標（x, y, z）を取得する．
また，座標はカメラの解像度やサイズに依存せず，座標情報を共通で扱うため，０から１の範囲に正規化している．
本システムでは中指の先の情報がカメラで認識しやすいと考え，中指の先のランドマーク番号である番号12の情報を取得するようにした．

次に，画面にどのような情報を得ることができているかを確認するため，デバッグ表示するようにした．
デバッグ表示の様子は\figref{fig:MediaPipe}に示す．
横方向からのカメラと上方向からのカメラでは，表示される座標値やランドマークの表示方法は共通であり，カメラの向きを区別するために表示名を「Side」，「Top」としている．
手の骨格とランドマークが白の線と赤い点で表示され，情報を得る中指の先のランドマークが強調されるように大きな白丸で表示した．
また，PCに表示するカメラ映像の画面の左上に取得した座標値の詳細も表示するようにした．

最後に，Unityに取得した手の検出状態やランドマーク座標情報を送信するようにした．
本システムでは，利用者の手の位置情報を即座に反映し，システムを動かしたいと考えたため，遅延の小さいUDP通信を用いた．

\begin{figure}[tb]
    \includegraphics[width=\linewidth]{MediaPipe.png}
    \caption{PC画面のデバッグ表示}\label{fig:MediaPipe}
\end{figure}

%3.4.3
\subsubsection{Unityにおける音・映像制御}
PythonからUDP通信によって送信された手の座標情報をUnity側で受信し，この情報をもとに音や映像の制御を行った．
主な仕組みとしては大きく4つある．

１つ目は，利用者が壁の異なる位置を押す動きをすると，その場所に対応する楽器の音色に切り替わって曲が再生されるという仕組みである．
例えば，投影映像上のうさぎがある位置に移動させ，そこの部分を押すような動きをすると，ピアノの音色で曲が流れる．
同じように，きつねの位置はギター，リスの位置は弦楽器，小鳥の位置は木管楽器，ハムスターの位置は金管楽器，たぬきの位置は打楽器の音で曲が再生される．


２つ目は，音量調整の仕組みである．
利用者が壁に手を近づけるほど音量が大きくなり，遠ざけるほど音が小さくなるようにした．
これにより，利用者自身が音を出しているという感覚を得やすくしている．

３つ目は，投影映像の変化である．
曲が流れている間は，クリスマスツリーのオーナメントが点滅したり，雪が降っているように見えるようにしたりした．
具体的に図を使って変化の様子を示す．
\figref{fig:syoki}は，利用者が操作を行っていない画面の状態であり，音は再生されず，動物のキャラクターや背景の演出も変化しない．
\figref{fig:ugoki}は，音が再生されている際の映像演出であり，きつねの位置を触った時の変化で，ギターの音色で曲が流れている状態である．
\figref{fig:syoki}と比べて，楽曲が再生されている間，クリスマスツリーのオーナメントが点滅，雪が降る，きつねの周りに音符が表示されるという変化があることが分かる．

また，音色に対応する動物が横に揺れたりその動物の周りに配置された音符のイラストが表示されたり消えたりするなど，音が流れている状態や，どの音色の音が流れているかが利用者に分かるようにした．
具体的に示すと，\figref{fig:change}は，利用者がハムスターの位置で壁を押した状態のときの映像変化である．
\figref{fig:ugoki}できつねの周りに音符が出現していたのがハムスターの周りになっていることが分かる．



４つ目は，雪だるまのイラストが利用者の手の動きを追従する仕組みである．
利用者が手を動かすとその動きに追従するように画面上を雪だるまが移動する．
これにより，利用者の動きを利用者自身にフィードバックしている．


\begin{figure}[tb]
    \centering
    \includegraphics[width=\linewidth]{syoki.png}
    \caption{初期状態の画面}\label{fig:syoki}
\end{figure}


\begin{figure}[tb]
    \centering
    \includegraphics[width=\linewidth]{ugoki.png}
    \caption{音が再生された時の映像演出}\label{fig:ugoki}
\end{figure}

\begin{figure}[tb]
    \centering
    \includegraphics[width=\linewidth]{change.png}
    \caption{操作位置に応じて動く動物が切り替わる演出}\label{fig:change}
\end{figure}


%4
\section{実践}
本研究で制作したシステムを用いた実践は，2025年11月28日に兵庫県立和田山特別支援学校で開催された和田山特別支援学校UDゲーム交流会にて行った．

実践では第３章で述べたシステムを設置し，イベントに参加している児童生徒や付き添いの教員・保護者に体験してもらった．

%4.1
\subsection{参加イベントの概要}
本研究で制作したシステムは，2025年11月28日に兵庫県立和田山特別支援学校で実施された「和田山特別支援学校UDゲーム交流会」で実践を行った．

このイベントの目的は２つある．
%
１つ目は，ユニバーサルデザインのゲーム交流会を通じて，児童生徒が地域の方と協力しながら活動する中で，協調性やコミュニケーション能力を育むことである．
%
２つ目は，デジタルファブリケーション体験会を通じて，特別支援教育におけるデジタル技術を活用したものづくりの可能性を広げ，創造的な学びのきっかけを提供することである．

%4.2
\subsection{参加者}
参加者は，小学部から高等部までの児童生徒，付き添っていた先生や保護者の方である．

参加した児童生徒の障がい特性は様々であり，発達障がいのある児童生徒や補助がなければ自分で身体を動かすことが難しく，車いすを利用している児童生徒も含まれていた．

児童生徒個人の障がい特性については倫理的配慮から把握しておらず，実際の体験行動や反応を観察した．

%4.3
\subsection{利用環境}
実践する会場は，学校の体育館の一角であり，周りにはほかの体験ブースがあった．

機材としては，短焦点プロジェクタとWebカメラ２台，カメラ設置用の三脚，音を出すスピーカー，UnityとPythonが実行できるPCを使用した．

体育館は他のブースでもプロジェクタなどを使うため，全体的に照明が落とされた状態であった．

%4.4
\subsection{当日準備}
当日は，学校に到着した後，ブースの位置や使える機材を確認した．

壁面に映すのに適した短焦点のプロジェクタを支援学校からお借りし，体験場所と投影範囲の確保ができるように設置した．

配置の様子の図を\figref{fig:haichi}に示す．
プロジェクタを使って映像を投影し，その映像に合わせて，Webカメラ２台を横方向からと上方向から設置し，利用者の手の動きが認識できるように調整した．
また，近くにスピーカーとPCを配置した．

準備の過程では，会場の机や台の配置，高さ，使用する機材の種類などが事前の練習環境と異なっていたため，現地の状況に合わせて設置位置を調整した．
現地での設置位置を\figref{fig:zissen}に示す．

\begin{figure}[tb]
    \includegraphics[width=\linewidth]{haichi.png}
    \caption{各機材の配置}\label{fig:haichi}
\end{figure}

\begin{figure}[tb]
    \includegraphics[width=\linewidth]{zissen.png}
    \caption{各機材の配置・実践の様子}\label{fig:zissen}
\end{figure}


%4.5
\subsection{体験の様子}
体験が始まると，複数の児童生徒がシステムに興味をもち，手を動かして体験する様子が見られた．
手を動かすことで音が流れることに気づいた児童生徒は，同じ動作を繰り返し，音色の変化を楽しんでいた．
また，壁から手を徐々に放して音が消えていく様子を体験し，自分の動きによって音が変化していると感じている児童生徒もいた．

身体を動かしにくい児童生徒は保護者や支援者と一緒に体験することで無理のない形で参加していた．
保護者が手を添えたり動かしたりすることで，システムに反応している手が保護者のものであっても，一緒に音や映像の変化を共有し，体験している様子が確認できた．

上手く操作ができない児童生徒には，一緒に手を動かし，説明しながら体験してもらった．
手をゆっくり動かす，反応しにくいときは手の向きを変えるといった具体的な動作を伝える際には，言葉だけでなく実際に動きを示すと体験を進める様子が見られた．

\begin{figure}[tb]
    \includegraphics[width=\linewidth]{zissen2.png}
    \caption{体験の様子}\label{fig:zissen2}
\end{figure}

%5
\section{課題・今後の展望}

%5.1
\subsection{実践環境における課題}
本研究で制作したシステムは，Webカメラを用いて利用者の手の動きを認識し，音色や映像の変化を利用者に体験してもらうことを目的とした．

システム上の課題としては，上方向からのカメラと横方向からのカメラ２台を用いる構成が，操作性の向上にはつながらなかった点が挙げられる．
２台のカメラを用いることで，手の位置情報や壁と手の距離の情報を詳細に得やすくなると考えられたが，実際は両方のカメラに手が正しく映らないとシステムが反応しない場合があり，手の動かし方や向きに注意が必要となってしまった．
特に，実践環境であった照明の落とされた体育館では，暗い状況であった．
この環境では，MediaPipeによる手の検出自体が不安定になってしまい，２台のカメラに正しく手を反応させなければならないとすると体験が難しくなってしまった．

機材の配置についても課題がある．利用者がよく触る位置であると考えられる動物キャラクターの位置がカメラの視野内に収まるようにカメラの位置を設定した．
しかし，カメラと利用者との距離が大きくなり，MediaPipeによる手の検出が不安定になる状態になることがあった．

実践環境での配置の問題としては，プロジェクターの位置も挙げられる．
プロジェクターを\figref{fig:zissen}の位置に設置した場合，利用者の立ち位置によって投影映像の一部が陰で見えなくなってしまった．
プロジェクターを真下に設置すると，児童生徒が蹴ったり踏んだりする危険があったため，\figref{fig:zissen}の位置に設置したが，その結果，十分に投影映像が見えない状況になってしまった．

さらに，複数の手がカメラの映像内に映り込む場合，リアルタイムで処理をしているので利用者が意図していない手が反応してしまうことや，利用者が動かしている手を正しく認識できていない場面も見られた．

これらの点から，情報を正しく取得しやすくするためのカメラ構成と，利用者にとっての操作性のわかりやすさとのバランスについて，検討が必要だと考えられる．
また，実践環境の条件や各機材の配置によりシステムの反応が不安定な状況や像が十分に見えない状態があった．
その結果，操作が複雑化し，十分に変化を楽しめていない場面があったので，実践環境に対応できるように改善する必要がある．
また，反応する手を一つにする仕組みへの改善や複数の手で体験できる別のインタラクションなどの設計も考えられる．

%5.2
\subsection{体験の様子からの課題}
実践の様子で，本システムは一見すると壁に映像を投影しているだけの展示物に見えるため，利用者が自ら体験しようとしてもらえる場面が少なかった．
そのため，体験をしてもらうために近くで声を掛けたり，操作方法を説明したりする必要があった．

操作方法の説明では，前節でも述べたように，システムの影響で操作が複雑になってしまったことから，言葉だけでの説明が難しい場面があった．
そのため，体験してもらった児童生徒の意図した動きができず，体験がスムーズに進まない場合もあった．

これらのことから，体験できるのかが分かにくい点が課題の一つである．
また，周囲にいる実施者による説明や関わり方にも工夫が必要である．


%5.3
\subsection{今後の展望}
今後は，課題をふまえて，次の５つの点について検討していきたいと考える．

１つ目は，カメラの構成や取得情報の見直しである．
情報を取得しやすいカメラ構成にしながらも利用者の操作が複雑にならないような設計にしたい．

２つ目は，用いる機材や設置方法の改善である．
プロジェクターやカメラの位置で利用者が十分に楽しむことができない状況が生じてしまった．
よって，安全性を確保しながら十分に映像の変化が楽しめるように，上から映像投影できるプロジェクターを用いるなど，使用機材や配置方法についての検討が必要である．

３つ目は，周囲の明暗など実践環境の影響を受けにくいシステム設計にすることである．
MediaPipeに代わる手法など，さまざまな環境条件でも安定して認識可能なライブラリについて調査や検討を行い，システムに導入したい．

４つ目は，体験内容や操作方法がわかりやすいようにガイドを導入することである．
実施者の説明でなく，誰でも体験方法を理解できるように映像内での操作ガイドや説明表示などを取り入れてみたい．
利用者自身が動きを試しながら操作できるようなシステムを目指したい．

５つ目は実施者自身の理解を深めることである．
今回は，事前見学のみで特別支援学校に通っている児童生徒のことを十分に理解していなかった．
そのため，どのような説明や関わり方が適切であるかがわからず，実践では上手くコミュニケーションが取れなかった場面もあった．
今後は障がい者支援に関する調査やフィールドワークを通して理解を深め，実践方法や説明の風に反映させていきたいと考えている．


%6
\section{まとめ}
本研究では，兵庫県立和田山特別支援学校に在籍する児童生徒を対象として，WebカメラとPCを用いたシステムの制作および実践を行った．
利用者の手の動きを認識し，その動きに応じて音や映像が変化する仕組みを構築し，障がいによる制約にかかわらず，音楽を楽しむ体験ができるものを目指した．

制作したシステムを用いた実践では，児童生徒が手を動かすことで音や映像が変化することに興味を示し，繰り返し体験を行う様子を観察することができた．
また，一人での操作が難しい場面でも，保護者や支援者と一緒に体験する様子が確認できた．

一方で，実践を通して，システムや認識方法などの課題も明らかになった．
特に，カメラの構成や取得情報の条件によって手の検出が不安定になり，利用者が動かしたいとおりの動作が反映されていない場面が見られた．
また，機材の配置方法や実践環境の影響により，十分な映像投影ができない状況や操作が難しい状態になってしまった．
そして，実施者自身の関わり方や説明方法についても課題が残った．

これらのことから，システムの設計や実践環境下での使用機材・機材配置，実施者のかかわり方などの改善が必要である．
今後は，より安定した手の認識手法や実践環境に応じた設計方法についての改善に加え，障がい者支援に関する理解をさらに深めていきたい．